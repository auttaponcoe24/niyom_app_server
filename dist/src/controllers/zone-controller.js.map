{"version":3,"sources":["../../../src/controllers/zone-controller.ts"],"sourcesContent":["import { TZone } from \"@/interfaces/zone-interface\";\nimport prisma from \"@/models/prisma\";\nimport createError from \"@/utils/create-error\";\nimport { NextFunction, Response, Request } from \"express\";\n\nexport const createZone = async (\n\treq: Request,\n\tres: Response,\n\tnext: NextFunction\n) => {\n\ttry {\n\t\tconst { role } = req.user;\n\n\t\tconst values: TZone = req.body;\n\t\t// const { zone_name } = req.body;\n\n\t\tif (role !== \"ADMIN\") {\n\t\t\treturn next(createError(\"not admin\", 401));\n\t\t}\n\n\t\tconst result = await prisma.zone.create({\n\t\t\tdata: values,\n\t\t});\n\n\t\tres.status(201).json({ message: \"ok\", zone: result });\n\t} catch (error) {\n\t\tnext(error);\n\t}\n};\n\nexport const getZone = async (\n\treq: Request,\n\tres: Response,\n\tnext: NextFunction\n) => {\n\ttry {\n\t\tconst { role } = req.user;\n\n\t\tif (role !== \"ADMIN\") {\n\t\t\treturn next(createError(\"not admin\", 201));\n\t\t}\n\n\t\tconst result = await prisma.zone.findMany();\n\t\tres.status(200).json({ message: \"ok\", result });\n\t} catch (error) {\n\t\tnext(error);\n\t}\n};\n"],"names":["createZone","getZone","req","res","next","role","user","values","body","createError","result","prisma","zone","create","data","status","json","message","error","findMany"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAKaA,UAAU;eAAVA;;IAyBAC,OAAO;eAAPA;;;iDA7BM;sDACK;;;;;;AAGjB,MAAMD,aAAa,OACzBE,KACAC,KACAC;IAEA,IAAI;QACH,MAAM,EAAEC,IAAI,EAAE,GAAGH,IAAII,IAAI;QAEzB,MAAMC,SAAgBL,IAAIM,IAAI;QAG9B,IAAIH,SAAS,SAAS;YACrB,OAAOD,KAAKK,IAAAA,oBAAW,EAAC,aAAa;QACtC;QAEA,MAAMC,SAAS,MAAMC,eAAM,CAACC,IAAI,CAACC,MAAM,CAAC;YACvCC,MAAMP;QACP;QAEAJ,IAAIY,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEC,SAAS;YAAML,MAAMF;QAAO;IACpD,EAAE,OAAOQ,OAAO;QACfd,KAAKc;IACN;AACD;AAEO,MAAMjB,UAAU,OACtBC,KACAC,KACAC;IAEA,IAAI;QACH,MAAM,EAAEC,IAAI,EAAE,GAAGH,IAAII,IAAI;QAEzB,IAAID,SAAS,SAAS;YACrB,OAAOD,KAAKK,IAAAA,oBAAW,EAAC,aAAa;QACtC;QAEA,MAAMC,SAAS,MAAMC,eAAM,CAACC,IAAI,CAACO,QAAQ;QACzChB,IAAIY,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEC,SAAS;YAAMP;QAAO;IAC9C,EAAE,OAAOQ,OAAO;QACfd,KAAKc;IACN;AACD"}