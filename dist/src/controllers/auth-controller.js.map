{"version":3,"sources":["../../../src/controllers/auth-controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport prisma from \"../models/prisma\";\n\nimport bcrypt from \"bcryptjs\";\n\nexport const register = async (\n\treq: Request,\n\tres: Response,\n\tnext: NextFunction\n) => {\n\ttry {\n\t\tconst { firstname, lastname, address, id_passpost, mail, password } =\n\t\t\treq.body;\n\n\t\t// Hash the password\n\t\tconst hashedPassword = await bcrypt.hash(password, 12);\n\n\t\t// Create the user in the database\n\t\tconst data = await prisma.user.create({\n\t\t\tdata: {\n\t\t\t\tfirstname,\n\t\t\t\tlastname,\n\t\t\t\taddress,\n\t\t\t\tid_passpost,\n\t\t\t\tmail,\n\t\t\t\tpassword: hashedPassword, // Save the hashed password\n\t\t\t},\n\t\t});\n\n\t\t// Send a response back to the client\n\t\tres.status(201).json({ message: \"User created successfully\", user: data });\n\t} catch (error) {\n\t\tnext(error); // Pass errors to the error handler middleware\n\t}\n};\n"],"names":["prisma","bcrypt","register","req","res","next","firstname","lastname","address","id_passpost","mail","password","hashedPassword","data","error","body","hash","user","create","status","json","message"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAOA,YAAY,mBAAmB;AAEtC,OAAOC,YAAY,WAAW;AAE9B,OAAO,IAAMC;eAAW,oBAAA,SACvBC,KACAC,KACAC;YAIEF,WADOG,WAAWC,UAAUC,SAASC,aAAaC,MAAMC,UAInDC,gBAGAC,MAaEC;;;;;;;;;;oBAnBPX,YAAAA,IAAIY,IAAI,EADDT,YACPH,UADOG,WAAWC,WAClBJ,UADkBI,UAAUC,UAC5BL,UAD4BK,SAASC,cACrCN,UADqCM,aAAaC,OAClDP,UADkDO,MAAMC,WACxDR,UADwDQ;oBAIlC;;wBAAMV,OAAOe,IAAI,CAACL,UAAU;;;oBAA7CC,iBAAiB;oBAGV;;wBAAMZ,OAAOiB,IAAI,CAACC,MAAM,CAAC;4BACrCL,MAAM;gCACLP,WAAAA;gCACAC,UAAAA;gCACAC,SAAAA;gCACAC,aAAAA;gCACAC,MAAAA;gCACAC,UAAUC;4BACX;wBACD;;;oBATMC,OAAO;oBAWb,qCAAqC;oBACrCT,IAAIe,MAAM,CAAC,KAAKC,IAAI,CAAC;wBAAEC,SAAS;wBAA6BJ,MAAMJ;oBAAK;;;;;;oBAChEC;oBACRT,KAAKS,QAAQ,8CAA8C;;;;;;;;;;;IAE7D;oBA7BaZ,SACZC,KACAC,KACAC;;;IA0BC"}